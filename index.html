<html>
<head>
	<title>INFO 3300 - Project 1 (cl795, fyw6, kar286)</title>
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="main.css">
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="http://d3js.org/topojson.v2.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.21.0/d3-legend.min.js"></script>
</head>
<body>
	<h1></h1>
	<div id="visualization" style="width: 100%;"></div>
	<div style="text-align: left; padding-left: 30px">
		<br>
		Sources: 
		<br>&nbsp&nbsp 1. &nbsp&nbsp http://data.worldbank.org/indicator/NY.GDP.PCAP.CD?view=chart
		<br>&nbsp&nbsp 2. &nbsp http://data.worldbank.org/indicator/SP.DYN.TFRT.INhttp://data.worldbank.org
		<br>&nbsp&nbsp 3. &nbsp http://country.io/data/
		<br>&nbsp&nbsp 4. &nbsp https://blog.graphiq.com/finding-the-right-color-palettes-for-data-visualizations-fcd4e707a283#.i66tky67f
		<br>&nbsp&nbsp 5. &nbsp https://bl.ocks.org/mbostock/4063530
	</div>

	<script> // initial setup script
		var debug = false;
		var mainDiv = d3.select("#visualization"); 

		// screen resolution
		var widthScale = 1500/window.innerWidth;
		var screenHeight = 700 / widthScale;
		var screenWidth = 1500 / widthScale;
		var footerOffset = 50;

		// data filtering vars
		var year = 1999, threshold = 2;

		// code for debugs
		if (debug) 
			mainDiv.style("border", "1px solid black");

		// set height to window height
		mainDiv
			.style("height", screenHeight + footerOffset)
			.style("width", "100%");

		// set the header title
		d3.select("h1").text("GDP vs Birth Rates in World Countries ("+year+")")
	</script>

	<script src = "CircleGraph.js"></script>
	<script src = "DataFilterer.js"></script>
	<script src = "DataParser.js"></script>

	<script> // get, filter, and display data
		// Load the csv data files and then runs a callback to display the data
		loadData(function(birthData, GDPData, rawCountryData) {
			// filter data
			birthData = filterDataByYear(birthData,year);
			GDPData = filterDataByYear(GDPData,year);

			// cap data so only countries that appear in both dataset will be included
			var cappedDatasets = filterDatasets(birthData, GDPData);
			birthData = cappedDatasets[0];
			GDPData = cappedDatasets[1];

			// combine datasets into one array and display the data
			var combinedData = combineData(year, birthData, GDPData, rawCountryData);
			var convertedCombineData = convertData(combinedData);
			displayCombinedData(convertedCombineData, convertDataNested(combinedData));

			// draw the legend
			displayLegend(convertedCombineData);
		});
	</script>

</body>
</html>
